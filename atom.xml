<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://DennyWanye.GitHub.io</id>
    <title>DennyWanye</title>
    <updated>2024-09-04T03:18:05.742Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://DennyWanye.GitHub.io"/>
    <link rel="self" href="https://DennyWanye.GitHub.io/atom.xml"/>
    <subtitle>Keep track of interesting things</subtitle>
    <logo>https://DennyWanye.GitHub.io/images/avatar.png</logo>
    <icon>https://DennyWanye.GitHub.io/favicon.ico</icon>
    <rights>All rights reserved 2024, DennyWanye</rights>
    <entry>
        <title type="html"><![CDATA[æœ‰é™å’Œæ— é™çš„æ¸¸æˆè¯»åæ„Ÿ]]></title>
        <id>https://DennyWanye.GitHub.io/post/you-xian-he-wu-xian-de-you-xi-du-hou-gan/</id>
        <link href="https://DennyWanye.GitHub.io/post/you-xian-he-wu-xian-de-you-xi-du-hou-gan/">
        </link>
        <updated>2024-09-04T03:10:43.000Z</updated>
        <content type="html"><![CDATA[<p>ã€Šæœ‰é™ä¸æ— é™çš„æ¸¸æˆã€‹ï¼ˆFinite and Infinite Gamesï¼‰æ˜¯è©¹å§†æ–¯Â·å¡æ–¯ï¼ˆJames P. Carseï¼‰äº1986å¹´å‡ºç‰ˆçš„ä¸€æœ¬å“²å­¦ä¹¦ç±ã€‚è¿™æœ¬ä¹¦ä»¥ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼æ¢è®¨äº†äººç”Ÿå’Œä¸–ç•Œçš„ä¸åŒå±‚é¢ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡â€œæ¸¸æˆâ€çš„éšå–»æ¥æ¢è®¨äººç±»è¡Œä¸ºå’Œç”Ÿæ´»æ–¹å¼ã€‚</p>
<p>ä¸»è¦å†…å®¹å’Œè§‚ç‚¹</p>
<ol>
<li>
<p>æœ‰é™æ¸¸æˆ vs. æ— é™æ¸¸æˆ</p>
<p>â€¢	æœ‰é™æ¸¸æˆï¼š<br>
â€¢	æœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸã€‚<br>
â€¢	å‚ä¸è€…åœ¨æ—¢å®šçš„è§„åˆ™ä¸‹ç«äº‰ã€‚<br>
â€¢	ç›®æ ‡æ˜¯èµ¢å¾—æ¯”èµ›ï¼Œèµ¢å¾—èƒœåˆ©æ„å‘³ç€æ¸¸æˆçš„ç»“æŸã€‚<br>
â€¢	ä¾‹å¦‚ï¼šä½“è‚²æ¯”èµ›ã€å•†ä¸šç«äº‰ã€æˆ˜äº‰ç­‰ã€‚<br>
â€¢	æ— é™æ¸¸æˆï¼š<br>
â€¢	æ²¡æœ‰å›ºå®šçš„è§„åˆ™å’Œæ—¶é—´é™åˆ¶ï¼Œè§„åˆ™å¯ä»¥éšæ—¶æ”¹å˜ã€‚<br>
â€¢	å‚ä¸è€…çš„ç›®æ ‡ä¸æ˜¯èµ¢å¾—æ¯”èµ›ï¼Œè€Œæ˜¯ç»§ç»­æ¸¸æˆï¼Œä¿æŒæ¸¸æˆçš„å»¶ç»­ã€‚<br>
â€¢	å¼ºè°ƒçš„æ˜¯æŒç»­çš„å‚ä¸å’Œæ¢ç´¢ï¼Œè€Œéç»ˆç»“ã€‚<br>
â€¢	ä¾‹å¦‚ï¼šç”Ÿæ´»æœ¬èº«ã€æ–‡åŒ–çš„å‘å±•ã€åˆ›é€ æ€§çš„æ´»åŠ¨ç­‰ã€‚</p>
</li>
<li>
<p>æ¸¸æˆçš„å¿ƒæ€</p>
<p>â€¢	å¡æ–¯è®¤ä¸ºï¼Œç”Ÿæ´»ä¸­å¤§éƒ¨åˆ†çš„è¡Œä¸ºå’Œå†³ç­–éƒ½å¯ä»¥å½’ç±»ä¸ºæœ‰é™æ¸¸æˆæˆ–æ— é™æ¸¸æˆã€‚æœ‰é™æ¸¸æˆçš„ç©å®¶å…³æ³¨çš„æ˜¯æ§åˆ¶ã€æƒåŠ›å’Œèƒœåˆ©ï¼Œè€Œæ— é™æ¸¸æˆçš„ç©å®¶åˆ™æ›´å…³æ³¨å¼€æ”¾æ€§ã€å¯èƒ½æ€§å’Œåˆ›é€ æ€§ã€‚</p>
</li>
<li>
<p>è§„åˆ™ä¸è‡ªç”±</p>
<p>â€¢	åœ¨æœ‰é™æ¸¸æˆä¸­ï¼Œè§„åˆ™æ˜¯å›ºå®šçš„ï¼Œæ‰“ç ´è§„åˆ™å³æ„å‘³ç€ä½œå¼Šæˆ–å¤±è´¥ã€‚<br>
â€¢	åœ¨æ— é™æ¸¸æˆä¸­ï¼Œè§„åˆ™å¯ä»¥è¢«æ”¹å˜ï¼Œç©å®¶æœ‰æ›´å¤šçš„è‡ªç”±å»æ¢ç´¢æ–°çš„å¯èƒ½æ€§ï¼Œåˆ›é€ æ–°çš„è§„åˆ™ã€‚</p>
</li>
<li>
<p>èµ¢å®¶ä¸è¾“å®¶</p>
<p>â€¢	æœ‰é™æ¸¸æˆä¸­ï¼Œèµ¢å®¶å’Œè¾“å®¶æ˜¯æ˜ç¡®çš„ï¼Œèƒœåˆ©æ„å‘³ç€æ¸¸æˆçš„ç»ˆç»“ã€‚<br>
â€¢	æ— é™æ¸¸æˆä¸­ï¼Œæ²¡æœ‰æœ€ç»ˆçš„èµ¢å®¶æˆ–è¾“å®¶ï¼Œå…³é”®åœ¨äºæ¸¸æˆçš„æŒç»­è¿›è¡Œå’Œä¸æ–­æ¼”å˜ã€‚</p>
</li>
<li>
<p>è§’è‰²ä¸èº«ä»½</p>
<p>â€¢	å¡æ–¯åŒºåˆ†äº†â€œè§’è‰²â€å’Œâ€œèº«ä»½â€ï¼š<br>
â€¢	è§’è‰²æ˜¯æœ‰é™æ¸¸æˆä¸­æ‰®æ¼”çš„ç‰¹å®šèº«ä»½ï¼Œå—åˆ¶äºè§„åˆ™å’ŒæœŸæœ›ã€‚<br>
â€¢	èº«ä»½æ˜¯æ— é™æ¸¸æˆä¸­çš„è‡ªæˆ‘è®¤çŸ¥ï¼Œæ›´åŠ å¼€æ”¾å’ŒæµåŠ¨ã€‚</p>
</li>
<li>
<p>ç”Ÿå‘½çš„å“²å­¦</p>
<p>â€¢	å¡æ–¯é€šè¿‡è¿™äº›å¯¹æœ‰é™ä¸æ— é™æ¸¸æˆçš„åˆ†æï¼Œè¯•å›¾å¼•å¯¼è¯»è€…å»åæ€è‡ªå·±åœ¨ç”Ÿæ´»ä¸­çš„é€‰æ‹©ï¼Œæ˜¯éµå¾ªæœ‰é™æ¸¸æˆçš„æ¨¡å¼ï¼Œè¿˜æ˜¯è¿½æ±‚ä¸€ç§æ›´å¼€æ”¾ã€è‡ªç”±å’Œåˆ›é€ æ€§çš„æ— é™æ¸¸æˆæ–¹å¼ã€‚</p>
</li>
</ol>
<p>æ€»ç»“</p>
<p>ã€Šæœ‰é™ä¸æ— é™çš„æ¸¸æˆã€‹é¼“åŠ±è¯»è€…è¶…è¶Šä¼ ç»Ÿçš„èƒœè´Ÿè§‚å¿µï¼Œè¿½æ±‚ä¸€ç§æ›´å…·åˆ›é€ æ€§ã€å¼€æ”¾æ€§å’ŒæŒç»­æ€§çš„ç”Ÿæ´»æ–¹å¼ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€æœ¬å“²å­¦ä¹¦ï¼Œæ›´æ˜¯ä¸€ç§ç”Ÿæ´»çš„æŒ‡å¯¼ï¼Œæé†’æˆ‘ä»¬åœ¨é¢å¯¹ç”Ÿæ´»çš„å„ç§æŒ‘æˆ˜å’Œé€‰æ‹©æ—¶ï¼Œå¯ä»¥é‡‡å–ä¸åŒçš„å¿ƒæ€å’Œè§†è§’ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å‡çº§Nodeç‰ˆæœ¬ï¼šV12->V20/V16->V20]]></title>
        <id>https://DennyWanye.GitHub.io/post/sheng-ji-node-ban-ben-v12-greaterv20v16-greaterv20/</id>
        <link href="https://DennyWanye.GitHub.io/post/sheng-ji-node-ban-ben-v12-greaterv20v16-greaterv20/">
        </link>
        <updated>2024-08-09T02:36:15.000Z</updated>
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯">èƒŒæ™¯</h3>
<p>é¡¹ç›®ä¸Šé¢æœ€è¿‘éœ€è¦å°†nodeçš„ç‰ˆæœ¬å‡çº§åˆ°V20ï¼Œä¸è¿‡ç°åœ¨é¡¹ç›®é‡Œé¢æœ‰çš„ç”¨çš„æ˜¯V12çš„nodeï¼Œæœ‰çš„ç”¨çš„æ˜¯V16çš„nodeã€‚</p>
<h3 id="ä¸€-åˆ©ç”¨nvmå°†é¡¹ç›®çš„nodeç¯å¢ƒè½¬æ¢ä¸º20">ä¸€ã€åˆ©ç”¨nvmå°†é¡¹ç›®çš„nodeç¯å¢ƒè½¬æ¢ä¸º20</h3>
<p>nvm æ˜¯ä¸€ç§å¾ˆæ–¹ä¾¿ç®¡ç†æœ¬åœ°nodeç‰ˆæœ¬çš„å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿçš„åˆ‡æ¢æœ¬åœ°çš„nodeç¯å¢ƒã€‚</p>
<pre><code class="language-javascript">nvm use 20
</code></pre>
<h3 id="äºŒ-è§£å†³npm-içš„æŠ¥é”™">äºŒã€è§£å†³npm içš„æŠ¥é”™</h3>
<p>ä»¥ä¸‹æ˜¯æŠ¥é”™å’Œå¦‚ä½•è§£å†³çš„ï¼š</p>
<h5 id="æŠ¥é”™1">æŠ¥é”™1ï¼š</h5>
<pre><code> Could not resolve dependency:
 peer react-dom@&quot;^15.4.2&quot; from react-addons-test-utils@15.6.2
 node_modules/react-addons-test-utils
   dev react-addons-test-utils@&quot;^15.1.0&quot; from the root project

</code></pre>
<p>åŸå› ï¼š<br>
This package is deprecated as of version 15.5.0<br>
TestUtils have been moved to react-dom/test-utils<br>
Shallow renderer has been moved to react-test-renderer/shallow</p>
<p>è§£å†³ï¼š<br>
å› ä¸ºé¡¹ç›®é‡Œé¢æ²¡æœ‰å¼•ç”¨ï¼Œæ‰€ä»¥åˆ é™¤è¯¥åŒ…</p>
<h5 id="æŠ¥é”™2">æŠ¥é”™2ï¼š</h5>
<pre><code> Could not resolve dependency:
 peer webpack@&quot;&gt;=1.12.9 &lt;3.0.0&quot; from babel-plugin-webpack-loaders@0.9.0
 node_modules/babel-plugin-webpack-loaders
   dev babel-plugin-webpack-loaders@&quot;^0.9.0&quot; from the root project
</code></pre>
<p>åŸå› ï¼š<br>
package.jsonä¸­çš„webpackç‰ˆæœ¬ä¸º3.12.0ï¼Œè€Œ babel-plugin-webpack-loaders@0.9.0éœ€è¦çš„webpackç‰ˆæœ¬ä¸º&gt;=1.12.9 â¤ï¸.0.0</p>
<p>è§£å†³ï¼š<br>
å› ä¸ºbabel-plugin-webpack-loaderså¤ªæ—§äº†åœæ­¢ç»´æŠ¤ï¼Œæ²¡æœ‰æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥åªèƒ½å°†webpacké™ä½ç‰ˆæœ¬ï¼Œé™ä½ä¸º2.7</p>
<h5 id="æŠ¥é”™3">æŠ¥é”™3ï¼š</h5>
<pre><code>Could not resolve dependency:
 peer draft-js@&quot;^0.10.x&quot; from react-draft-wysiwyg@1.12.13
 node_modules/react-draft-wysiwyg
   react-draft-wysiwyg@&quot;^1.12.13&quot; from the root project
</code></pre>
<p>åŸå› ï¼š<br>
react-draft-wysiwygéœ€è¦çš„ä¸º&quot;draft-js&quot;: &quot;<sup>0.10.xâ€ï¼Œè€Œpackage.jsonä¸­çš„ä¸º&quot;</sup>0.11.7&quot;</p>
<p>è§£å†³ï¼š<br>
å› ä¸ºé¡¹ç›®é‡Œé¢æ²¡æœ‰å¼•ç”¨ï¼Œæ‰€ä»¥åˆ é™¤è¯¥åŒ…</p>
<h5 id="æŠ¥é”™4">æŠ¥é”™4ï¼š</h5>
<pre><code>'darwin-x64' binaries cannot be used on the 'darwin-arm64v8' platform. Please remove the 'node_modules/sharp/vendor' directory and run 'npm install'.
</code></pre>
<p>åŸå› ï¼š<br>
Sharp éœ€è¦å•ç‹¬å®‰è£…é€‚é…æœ¬æœºè‹¹æœM1èŠ¯ç‰‡çš„åŒ…</p>
<p>è§£å†³ï¼š<br>
å‘ç°å…³äºsharpåŒ…çš„å®‰è£…é—®é¢˜ï¼Œåœ¨M1èŠ¯ç‰‡çš„Macä¸Šï¼Œéœ€è¦åœ¨å®‰è£…çš„æ—¶å€™ï¼Œåˆ©ç”¨ <code>npm install --cpu=arm64 --os=darwin sharp</code></p>
<h5 id="æŠ¥é”™5">æŠ¥é”™5ï¼š</h5>
<pre><code>å…³äºextract-text-webpack-pluginçš„ç‰ˆæœ¬æ”¯æŒ3.0ä»¥ä¸Šçš„webpackçš„æŠ¥é”™ï¼Œé”™è¯¯æš‚æ—¶æ‰¾ä¸åˆ°äº†ï¼Œè·Ÿ
æŠ¥é”™2ç±»ä¼¼ï¼Œè€Œä¸”è¿™ä¸ªæŠ¥å› ä¸ºå¼ƒç”¨äº†ï¼Œæ‰€ä»¥åœ¨npmå®˜ç½‘ä¸Šé¢æœç´¢ä¸åˆ°ï¼Œæˆ‘æœ€åæ˜¯åœ¨è°·æ­Œæœç´¢é‡Œé¢æœç´¢è¿™ä¸ªåŒ…åç§°ï¼Œæ‰æ‰¾åˆ°äº†ä¹‹å‰çš„åœ°å€ã€‚
ä»¥ä¸‹æ˜¯åœ°å€ï¼šhttps://www.npmjs.com/package/extract-text-webpack-plugin

å»ºè®®é‡è§è¿™ç§ç›´æ¥åˆ©ç”¨urlè§„å¾‹æ›¿æ¢æ‰åŒ…åç§°è¿›è¡Œè®¿é—® https://www.npmjs.com/package/åŒ…åç§°

</code></pre>
<p>åŸå› ï¼š<br>
extract-text-webpack-pluginçš„ç‰ˆæœ¬æ”¯æŒ3.0ä»¥ä¸Šçš„webpack</p>
<p>è§£å†³ï¼š<br>
æ‰¾åˆ°å…¶gité“¾æ¥åï¼Œå°†å…¶é™ä½è‡³å¯¹åº”webpack2.0ç‰ˆæœ¬çš„åŒ…</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®°å½•MongoDBå‡çº§ 5.0 to 6.0]]></title>
        <id>https://DennyWanye.GitHub.io/post/ji-lu-mongodb-sheng-ji-50-to-60/</id>
        <link href="https://DennyWanye.GitHub.io/post/ji-lu-mongodb-sheng-ji-50-to-60/">
        </link>
        <updated>2024-08-09T02:25:52.000Z</updated>
        <content type="html"><![CDATA[<h3 id="ä¸€-ç¡®å®šmongodbçš„å‡çº§ç‰ˆæœ¬å…¼å®¹æ€§å½±å“">ä¸€ã€ç¡®å®šMongoDBçš„å‡çº§ç‰ˆæœ¬å…¼å®¹æ€§å½±å“</h3>
<p>å¯ä»¥ä»å®˜ç½‘æ‰¾åˆ°ï¼š<br>
https://www.mongodb.com/zh-cn/docs/manual/release-notes/6.0-compatibility/</p>
<p>å…ˆçœ‹ä¸€éï¼Œåœ¨ç»“åˆæœ¬åœ°ä»£ç äº†è§£éœ€è¦å¤„ç†çš„é”™è¯¯ï¼š</p>
<p>åƒæ˜¯è¿™æ¬¡éœ€è¦å¤„ç†çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<ol>
<li>not support options: usecreateindex, usefindandmodify, autoreconnect</li>
<li>reconnectinterval, reconnecttries</li>
<li>å…³æ³¨å¸¦æœ‰ $regex æŸ¥è¯¢çš„åŠŸèƒ½ï¼Œ test case è¦åŒ…å«è¿™ç±»åŠŸèƒ½</li>
<li>åˆ é™¤çš„æ“ä½œç¬¦</li>
<li>å·²åˆ é™¤å‚æ•° --tlsFIPSMode</li>
<li>å¼ƒç”¨ db.collection.reIndex()</li>
<li>æ£€æŸ¥ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>c</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">ã€</mi></mrow><annotation encoding="application/x-tex">accumulatorã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">ã€</span></span></span></span>function å’Œ $where è¡¨è¾¾å¼ä¸­å·²åˆ é™¤å­—ç¬¦ä¸²å’Œæ•°ç»„å‡½æ•°</li>
<li>æ£€æŸ¥ expireAfterSeconds è®¾ä¸º NaN çš„ TTL index</li>
</ol>
<pre><code class="language-javascript">//æŸ¥è¯¢ TTL Non index çš„è„šæœ¬
function getNaNIndexes() {
   const nan_index = [];
 
   const dbs = db.adminCommand({ listDatabases: 1 }).databases;
 
   dbs.forEach((d) =&gt; {
      if (d.name != 'local') {
         const listCollCursor = db
            .getSiblingDB(d.name)
            .runCommand({ listCollections: 1 }).cursor;
 
         const collDetails = {
            db: listCollCursor.ns.split(&quot;.$cmd&quot;)[0],
            colls: listCollCursor.firstBatch.map((c) =&gt; c.name),
         };
 
         collDetails.colls.forEach((c) =&gt;
            db
               .getSiblingDB(collDetails.db)
               .getCollection(c)
               .getIndexes()
               .forEach((entry) =&gt; {
                  if (Object.is(entry.expireAfterSeconds, NaN)) {
                     nan_index.push({ ns: `${collDetails.db}.${c}`, index: entry });
                  }
               })
         );
      }
   });
 
   return nan_index;
};
 
getNaNIndexes();
 
</code></pre>
<h3 id="äºŒ-æ ¹æ®ä¸Šé¢åšå‡ºæ¥çš„ä¿¡æ¯å¯¹æœ¬åœ°ä»£ç ä½œå‡ºä¿®æ”¹">äºŒã€æ ¹æ®ä¸Šé¢åšå‡ºæ¥çš„ä¿¡æ¯ï¼Œå¯¹æœ¬åœ°ä»£ç ä½œå‡ºä¿®æ”¹</h3>
<p>è¿™ä¸€æ­¥ï¼Œä¸»è¦æ˜¯æ ¹æ®ç¬¬ä¸€æ­¥æ•´ç†å‡ºæ¥çš„ä¿¡æ¯åšä»£ç æ£€æŸ¥å’Œä¿®æ”¹ï¼Œç¡®å®šæœ¬åœ°çš„ä»£ç å·²ç»åšäº†ç¬¬ä¸€æ­¥çš„å…¼å®¹æ€§å¤„ç†ã€‚</p>
<h3 id="ä¸‰-å°†æœ¬åœ°çš„é¡¹ç›®è¿æ¥ä¸Š60ç‰ˆæœ¬çš„mongodbæ•°æ®åº“è¿è¡Œå¹¶è§£å†³æŠ¥é”™">ä¸‰ã€å°†æœ¬åœ°çš„é¡¹ç›®è¿æ¥ä¸Š6.0ç‰ˆæœ¬çš„MongoDBæ•°æ®åº“ï¼Œè¿è¡Œå¹¶è§£å†³æŠ¥é”™</h3>
<p>è¿™ä¸€æ­¥ï¼Œç›´æ¥åœ¨æœ¬åœ°é¡¹ç›®ä¸Šé¢é“¾æ¥6.0ç‰ˆæœ¬çš„æ•°æ®åº“ï¼Œå¾ˆå¹¸è¿ï¼Œæ²¡æœ‰å‡ºç°å¾ˆéš¾è§£å†³çš„æŠ¥é”™ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Expo Realm æ•°æ®åº“æ“ä½œ]]></title>
        <id>https://DennyWanye.GitHub.io/post/expo-realm-shu-ju-ku-cao-zuo/</id>
        <link href="https://DennyWanye.GitHub.io/post/expo-realm-shu-ju-ku-cao-zuo/">
        </link>
        <updated>2024-08-03T04:36:50.000Z</updated>
        <content type="html"><![CDATA[<h3 id="ä¸€-è¯»å–æ“ä½œ">ä¸€ã€è¯»å–æ“ä½œ</h3>
<p>ç”¨ <code>useQuery</code> çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-javascript">
export type RealmQuerySearchText = {
    searchKey: string,
    searchValue: any,
}

export const useQueryN = (flag: flag, searchParams?: RealmQuerySearchText | undefined) =&gt; {
  return useQuery(flag, item =&gt; {
    if (searchParams) {
      return item.filtered(searchParams.searchKey + ' TEXT $0', searchParams.searchValue)
    } else {
      return item
    }
  });
}

</code></pre>
<p>ç”¨ <code>useObject</code>çš„æ–¹æ³•æ²¡æœ‰æˆåŠŸè¿‡ï¼Œä¸çŸ¥é“æ€ä¹ˆä¼ é€’ <code>_id</code> æ•°æ®ï¼Œä¸è¿‡ä»¥ä¸‹æ˜¯ç”¨ <code>realm.object</code>æ–¹æ³•çš„ç¤ºä¾‹ã€‚</p>
<pre><code class="language-javascript">await realm
    .objects(UserData)             //UserData æ˜¯ schema
    .filtered(`userId == $0`, userId)

</code></pre>
<h3 id="äºŒ-å†™å…¥æ“ä½œ">äºŒã€å†™å…¥æ“ä½œ</h3>
<p>åˆ©ç”¨ <code>realm.write</code> :</p>
<p>ç¬¬ä¸€ç§æ–¹å¼ï¼š</p>
<pre><code class="language-javasciprt">
//timelinesBeforeSortçš„schema ä¸­ åŒ…å«äº† eventsçš„schemaï¼Œæ˜¯ä»¥Listçš„æ–¹å¼åŒ…å«çš„
//eventså¿…é¡»æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼ˆå¯¹äºeventsçš„ä¸»é”®æ¥è¯´ï¼Œä¹Ÿå°±æ˜¯ä¸»é”®éœ€è¦æ–°å»ºï¼Œä¸èƒ½å­˜åœ¨
//è¿™ä¹Ÿå°±æ„å‘³ç€ä¸èƒ½ç”¨è¿™ç§æ–¹æ³•å°†å·²ç»å­˜åœ¨çš„events é“¾æ¥åˆ° timelinesBeforeSortçš„schemaä¸Š

    await realm.write(() =&gt; {
      timelinesBeforeSort.events = [...timelinesBeforeSort.events, {
        _id: new BSON.ObjectId(),
        what: what,
        why: why || '',
        how: how || '',
        start: start,
        end: end,
        who: [...who],
        where: [...where],
      }]
    })

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Expo Realm é…ç½®æœ¬åœ°å’Œè¿œç«¯çš„æ•°æ®åº“è¿›è¡ŒåŒæ­¥]]></title>
        <id>https://DennyWanye.GitHub.io/post/expo-realm-pei-zhi-ben-di-he-yuan-duan-de-shu-ju-ku-jin-xing-tong-bu/</id>
        <link href="https://DennyWanye.GitHub.io/post/expo-realm-pei-zhi-ben-di-he-yuan-duan-de-shu-ju-ku-jin-xing-tong-bu/">
        </link>
        <updated>2024-07-26T06:08:04.000Z</updated>
        <content type="html"><![CDATA[<h3 id="å¼€å§‹ä¹‹å‰-åˆ›å»ºä¸€ä¸ªappserviceå¹¶å¼€å¯åŒæ­¥æ³¨æ„æŸ¥çœ‹ä¸€ä¸‹æç¤ºæ³¨æ„é¡¹">å¼€å§‹ä¹‹å‰ åˆ›å»ºä¸€ä¸ªAppServiceï¼Œå¹¶å¼€å¯åŒæ­¥ï¼ˆæ³¨æ„æŸ¥çœ‹ä¸€ä¸‹æç¤ºæ³¨æ„é¡¹ï¼‰</h3>
<p>è¿™ä¸ªä¸€æ­¥éœ€è¦åœ¨å®˜ç½‘è¿›è¡Œæ“ä½œï¼š<br>
å½“ç„¶ä½ éœ€è¦å…ˆåœ¨å®˜ç½‘åˆ›å»ºä¸€ä¸ªDB å’ŒAPP Serviceã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://DennyWanye.GitHub.io/post-images/1721975331662.png" alt="" loading="lazy"></figure>
<p>æ³¨æ„1: ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯·æ³¨æ„å°†æ¥å—åŒ¿åé“¾æ¥å¼€å¯ï¼Œå¦åˆ™ï¼Œä½ å¾ˆéš¾è¿ä¸Šï¼Œå¯ä»¥åç»­æŒ‰ç…§ä½ çš„éœ€è¦è¿›è¡Œå¢åŠ æƒé™éªŒè¯åŠŸèƒ½ï¼š<br>
<img src="https://DennyWanye.GitHub.io/post-images/1721975558074.png" alt="" loading="lazy"></p>
<p>æ³¨æ„2: å°†å¦‚æœä½ æç¤ºIP Addressé™åˆ¶è®¿é—®çš„é—®é¢˜ï¼Œè¯·ç›´æ¥æ·»åŠ ä¸€ä¸‹è§„åˆ™åˆ°Network Accessä¸­ï¼Œä»£è¡¨å…è®¸ä»»æ„IPè¿›è¡Œè®¿é—®ï¼š<br>
<img src="https://DennyWanye.GitHub.io/post-images/1721975682205.png" alt="" loading="lazy"></p>
<p>åœ¨åç«¯å¯ç”¨ Flexible Syncã€‚æ‚¨å¿…é¡»åœ¨åç«¯é…ç½® Flexible Syncï¼Œç„¶åæ‰èƒ½åœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼š<br>
https://www.mongodb.com/zh-cn/docs/atlas/app-services/sync/configure/enable-sync/#std-label-enable-flexible-sync</p>
<h3 id="åˆå§‹åŒ–åº”ç”¨å®¢æˆ·ç«¯">åˆå§‹åŒ–åº”ç”¨å®¢æˆ·ç«¯</h3>
<p>doc: https://www.mongodb.com/zh-cn/docs/atlas/device-sdks/sdk/react-native/app-services/connect-to-app-services-app/#std-label-react-native-connect-to-mongodb-realm-backend-app</p>
<p>æ­¤æ­¥éª¤çš„ç›®çš„æ˜¯ä¸ºäº†è®©localAppå’Œè¿œç¨‹åˆ›å»ºçš„appè¿›è¡Œè®¿é—®ï¼š<br>
ä»¥ä¸‹ä¸ºä»£ç ï¼š</p>
<pre><code class="language-javascript">import React from 'react';
import {AppProvider, UserProvider, RealmProvider} from '@realm/react';
function AppWrapperSync() {
  return (
    &lt;AppProvider id={APP_ID}&gt;           //1. è¾“å…¥AppID
      &lt;UserProvider fallback={LogIn}&gt;    //2.åˆ©ç”¨UserProviderï¼Œfallbackè¿›è¡Œç™»å½•éªŒè¯ï¼Œå»ºè®®ä¸€å¼€å§‹ä½¿ç”¨åŒ¿åç™»å½•ï¼Œä½¿ç”¨åŒ¿åç™»å½•éœ€è¦ç¡®è®¤ä¸€ä¸‹ æ³¨æ„1 çš„è®¾ç½®
        &lt;RealmProvider                         //æ­¤å¤„è®¾ç½® sync å¯¹è±¡çš„ flexible: trueï¼Œ ä»£è¡¨è¿›è¡ŒåŒæ­¥ã€‚
          schema={[YourObjectModel]}
          sync={syncConfigWithErrorHandling}&gt;
          &lt;RestOfApp /&gt;
        &lt;/RealmProvider&gt;
      &lt;/UserProvider&gt;
    &lt;/AppProvider&gt;
  );
}

  //å¤„ç†å¦‚æœåŒæ­¥è¿œç«¯realmå¤±è´¥çš„æƒ…å†µï¼Œä½œç”¨ï¼ŒåŒæ­¥å¤±è´¥çš„æŠ¥é”™ä¿¡æ¯å½±å“ç”¨æˆ·ä½“éªŒ
  const syncConfigWithErrorHandling: any = {
    flexible: true,                 //è®¾ç½®ä¸ºtrueï¼Œå¼€å¯åŒæ­¥
    onError: (_session: any, error: any) =&gt; {      //å¤„ç†æŠ¥é”™æƒ…å†µï¼Œæ„Ÿè§‰å¿½ç•¥å°±å¥½
      console.log(_session)
      console.log(error);
    },
    //ç”¨äºç»™remoteåˆå§‹åŒ–schemas
    // initialSubscriptions: {
    //   update(subs, realm) {
    //     subs.add(realm.objects(schemas));
    //   },
    // }
    newRealmFileBehavior: realmAccessBehavior,        //ç”¨äºå¤„ç†ç¦»çº¿æ—¶ï¼ŒåŒæ­¥å¤±è´¥çš„æƒ…å†µ
    existingRealmFileBehavior: realmAccessBehavior,   //ç”¨äºå¤„ç†ç¦»çº¿æ—¶ï¼ŒåŒæ­¥å¤±è´¥çš„æƒ…å†µ
  }


//æ­¤ä¸ºåœ¨å¦‚æœé¡¹ç›®ç¦»çº¿æ—¶ï¼ŒåŒæ­¥çš„è®¾ç½®ï¼Œä¸“é—¨é’ˆå¯¹appç¦»çº¿æ—¶å€™çš„å¤„ç†ï¼šhttps://www.mongodb.com/zh-cn/docs/atlas/device-sdks/sdk/react-native/sync-data/configure-a-synced-realm/#access-a-synced-realm-while-offline
const realmAccessBehavior: Realm.OpenRealmBehaviorConfiguration = {
    //type: Realm.OpenRealmBehaviorType.OpenImmediately,
    //@ts-ignore
    type: 'downloadBeforeOpen',            //https://www.mongodb.com/docs/realm-sdks/react/latest/enums/Realm.OpenRealmBehaviorType.html
    //@ts-ignore
    timeOutBehavior: 'openLocalRealm',     //https://www.mongodb.com/docs/realm-sdks/react/latest/enums/Realm.OpenRealmTimeOutBehavior.html
    timeOut: 1000,
  };

</code></pre>
<h3 id="å¯¹å®¢æˆ·ç«¯é¡¹ç›®ä¸­çš„ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯">å¯¹å®¢æˆ·ç«¯é¡¹ç›®ä¸­çš„ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼š</h3>
<p>Loginçš„ä»£ç é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨API Keyï¼Œé‚®ç®±/å¯†ç ç­‰ï¼Œä½†æ˜¯å›½å†…ç½‘ç»œåŸå› ä¸”åªæ˜¯æµ‹è¯•ï¼Œæ‰€ä»¥ä½¿ç”¨åŒ¿åç™»å½•ï¼Œ æ³¨æ„1<br>
<img src="https://DennyWanye.GitHub.io/post-images/1721981570743.png" alt="" loading="lazy"></p>
<pre><code class="language-javacript">
import { View, Text } from 'react-native';
import { useEffect } from 'react'
import { useAuth } from '@realm/react';


const LogIn = () =&gt; {
    // `logInWithAnonymous` logs in a user using an
    // anonymous Realm Credential.
    // `result` gives us access to the result of the
    // current operation. In this case, `logInWithAnonymous`.
    const { logInWithAnonymous, result } = useAuth();     //ç›´æ¥åˆ©ç”¨logInWithAnonymousæ¥è¿›è¡ŒåŒ¿åç™»å½•
    // Log in an anyonmous user on component render.
    // On successful login, this fallback component unmounts.
    useEffect(() =&gt; {
        logInWithAnonymous();
    }, [])
    return (
        &lt;View &gt;
            {!result.error &amp;&amp; &lt;Text&gt;Please log in&lt;/Text&gt;}
            &lt;View&gt;
                {result.pending &amp;&amp; &lt;Text&gt;{JSON.stringify(result.pending)}&lt;/Text&gt;}
                {result.error &amp;&amp; &lt;Text&gt;{JSON.stringify(result.error)}&lt;/Text&gt;}
            &lt;/View&gt;
        &lt;/View&gt;
    );
};

export default LogIn

</code></pre>
<p>APP_IDçš„ä½ç½®ï¼š<br>
<img src="https://DennyWanye.GitHub.io/post-images/1721979221799.png" alt="" loading="lazy"></p>
<h3 id="è°ƒç”¨è®¢é˜…æ–¹æ³•è®¢é˜…æ¯ä¸€ä¸ªéœ€è¦åŒæ­¥çš„modelè¿™æ—¶ä½ çš„æ•°æ®æ”¹åŠ¨">è°ƒç”¨è®¢é˜…æ–¹æ³•ï¼Œè®¢é˜…æ¯ä¸€ä¸ªéœ€è¦åŒæ­¥çš„modelï¼Œè¿™æ—¶ä½ çš„æ•°æ®æ”¹åŠ¨</h3>
<pre><code class="language-javascript">import React from 'react';
import { useState, useEffect } from 'react';
import { useRealm } from '@realm/react';
import { WaitForSync} from 'realm';

import { useColorScheme } from '@/hooks/useColorScheme';
import { useQueryN, useCreateAndUpdate, useDelte } from '@/hooks/useRealmNovle';
import ListOfRealmModels from '@/constants/ListOfRealmModels';


  const realm = useRealm()
  const ideas: any = useQueryN(ListOfRealmModels.ideas);  //æ­¤å¤„ideasçš„å€¼ä¸ºä»æœ¬åœ°æ•°æ®åº“åº“ä¸­åˆ©ç”¨ useQuery(&quot;Ideas&quot;)æ‹¿å‡ºæ¥çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯å¸¦æœ‰subscribeæ–¹æ³•çš„ã€‚
  const tags: any = useQueryN(ListOfRealmModels.tags);
  const collections: any = useQueryN(ListOfRealmModels.collections);
  const objects: any = useQueryN(ListOfRealmModels.object);
  const events: any = useQueryN(ListOfRealmModels.events);
  const subscribeArray: any = [ideas, tags, collections, objects, events]

  function subscribeModel(subscribeArray: Array&lt;any&gt;) {
    // Create an async function so that we can `await` the
    // promise from `.subscribe()`.
    subscribeArray.forEach((item, index) =&gt; {
      const createSubscription = async () =&gt; {
        await item.subscribe({
          name: 'subscribe' + index,
          behavior: WaitForSync.FirstTime,                  //When you subscribe to a query's results, the results do not contain objects until synced data is downloaded. When you do need to wait for synced objects to finish downloading, configure the waitForSync option.
        });
      };
      createSubscription().catch(console.error);
    })
  }

  useEffect(() =&gt; {
    subscribeModel(subscribeArray)
  }, []);

</code></pre>
<h3 id="ä¿®æ”¹ç™»å½•æ–¹å¼ä¸ºé‚®ç®±å¯†ç ç™»å½•">ä¿®æ”¹ç™»å½•æ–¹å¼ä¸ºé‚®ç®±/å¯†ç ç™»å½•</h3>
<ol>
<li>åœ¨webçš„AppServiceä¸­å¼€å¯ç™»å½•æ–¹å¼<br>
<img src="https://DennyWanye.GitHub.io/post-images/1722318411077.png" alt="" loading="lazy"></li>
<li>é…ç½®é‚®ç®±éªŒè¯<br>
è¯´æ˜ï¼š æš‚æ—¶è®¾ç½®ä¸ºAutomatically confirm users ï¼Œè¿™æ ·å­å°±ä¸éœ€è¦é¢å¤–çš„éªŒè¯ç½‘é¡µäº†ï¼Œæ–¹ä¾¿å¼€å‘<br>
åŒç†password reset Methodè®¾ç½®ä¸º Run a password reset functionï¼Œ ç„¶åè®¾ç½®é»˜è®¤å‡½æ•°ï¼ˆç›´æ¥ç‚¹å‡»ä¿å­˜å°±å¥½äº†ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°è™½ç„¶æ— æ³•æ‰§è¡Œé¢„æœŸçš„ä¿®æ”¹åŠŸèƒ½ï¼Œä½†æ˜¯æ–¹ä¾¿æˆ‘ä»¬å¼€å§‹è¿›è¡Œå¼€å‘ï¼Œåé¢å¯ä»¥å¯¹è¿™ä¸ªè¿›è¡Œé…ç½®ã€‚<br>
<img src="https://DennyWanye.GitHub.io/post-images/1722318478288.png" alt="" loading="lazy"></li>
<li>åˆ©ç”¨ <code>useEmailPasswordAuth()</code>æ¥è¿›è¡Œç™»å½•å’Œæ³¨å†Œ</li>
</ol>
<pre><code class="language-javascript">  const { result, logIn, register } = useEmailPasswordAuth();

  const loginFunction = async () =&gt; {
    if (!isLogin) {
      setIsLogin(true)
      showSnackbar('è¯·è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œè°¢è°¢ğŸ™ã€‚')
      return
    }
    if (email &amp;&amp; password) {
      logIn({ email, password });
    } else {
      showSnackbar('è´¦å·æˆ–è€…å¯†ç ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ï¼Œè°¢è°¢ğŸ™ã€‚')
    }
  }

  const hasEmailErrors = () =&gt; {
    if (email === '') {
      return false
    }
    return !email.includes('@');
  };

  const registerFunction = async () =&gt; {
    if (isLogin) {
      setIsLogin(false)
      showSnackbar('è¯·è¾“å…¥è´¦å·ã€å¯†ç å’Œç”¨æˆ·åè¿›è¡Œæ³¨å†Œï¼Œè°¢è°¢ğŸ™ã€‚')
      return
    }
    await register({ email, password });
  };

  useEffect(() =&gt; {             //æ³¨æ„ï¼šåˆ©ç”¨useEffectåœ¨æ³¨å†Œå®Œæˆåï¼Œè§¦å‘ç™»å½•æ“ä½œï¼Œç”¨æˆ·æ³¨å†Œå®Œï¼Œä»¥åï¼Œè¿˜éœ€è¦ç™»å½•æ¿€æ´»ä¸€ä¸‹ã€‚å¦åˆ™å°±åªèƒ½åœ¨web çš„ App usersï¼ˆå·¦ä¾§ï¼‰--&gt; Users --&gt; Pending ä¸­æ‰èƒ½æ‰¾åˆ° 

    if (result.success &amp;&amp; result.operation === AuthOperationName.Register) {
      logIn({ email, password });
    }
  }, [result, logIn, email, password]);
</code></pre>
<h3 id="å…³äºä¿®æ”¹å·²ç»å­˜åœ¨çš„æ–‡æ¡£æ•°æ®">å…³äºä¿®æ”¹å·²ç»å­˜åœ¨çš„æ–‡æ¡£æ•°æ®ï¼š</h3>
<pre><code class="language-javascript">realm.create('UserData', {                  //è¿™ä¸ªå¯¹è±¡éœ€è¦ä¿®æ”¹å®Œæˆåçš„å®Œæ•´é›†åˆæ•°æ®ï¼ˆ?å­˜åœ¨ç–‘é—®ï¼Œéœ€è¦éªŒè¯ä¸€ä¸‹)
            _id: userData._id,
            userId: userId,
            tags: [...userData.tags, writeObj],
            ideas: [...userData.ideas],
          }, 'modified');

//æ­¤ä¸ºåˆ›å»ºæ•°æ®çš„æ–¹æ³•
await realm.write(() =&gt; {
        realm.create(&lt;SchemaName&gt;, writeObj)
      })
</code></pre>
<h3 id="æ–°æ·»åŠ schemaçš„æ–¹æ³•">æ–°æ·»åŠ schemaçš„æ–¹æ³•</h3>
<ol>
<li>æœ¬åœ°æ·»åŠ å¥½model</li>
</ol>
<pre><code class="language-javascript">import { BSON, ObjectSchema, Object, List } from &quot;realm&quot;;
import { Events } from &quot;./Events&quot;;

export class Timelines extends Object&lt;Timelines&gt; {
    _id!: BSON.ObjectId;
    name!: string;
    desc: string = '';
    events!: List&lt;Events&gt; ;

    static schema: ObjectSchema = {
        name: 'Timelines',
        properties: {
          _id: 'objectId',
          name: {type: 'string', indexed: 'full-text'},
          desc: 'string',
          events: 'Events[]',
        },
        primaryKey: '_id',
      };
}

</code></pre>
<ol start="2">
<li>å°†å…¶æ”¾åˆ°åˆå§‹åŒ–å’Œè®¢é˜…ä¸­</li>
</ol>
<p>åˆå§‹åŒ–ï¼š</p>
<pre><code class="language-javascript">
  const schemas: any = [Ideas, Tags, Collections, ObjectOfCollections, Events, **Timelines**,  UserData]


//å¤„ç†å¦‚æœåŒæ­¥è¿œç«¯realmå¤±è´¥çš„æƒ…å†µï¼Œä½œç”¨ï¼ŒåŒæ­¥å¤±è´¥çš„æŠ¥é”™ä¿¡æ¯å½±å“ç”¨æˆ·ä½“éªŒ
  const syncConfigWithErrorHandling: any = {
    flexible: true,
    onError: (_session: any, error: any) =&gt; {
      console.log(_session)
      console.log(error);
    },
    //æ˜¯å¦æ˜¯ç”¨äºç»™remoteåˆå§‹åŒ–schemasï¼Ÿ
    initialSubscriptions: {
      update(subs: any, realm: any) {
        subs.add(realm.objects(**schemas**));
      },
    },
    newRealmFileBehavior: realmAccessBehavior,
    existingRealmFileBehavior: realmAccessBehavior,
  }


&lt;PaperProvider&gt;
      &lt;AppProvider id={APP_ID} &gt;
        &lt;UserProvider fallback={LogIn}&gt;
          &lt;RealmProvider
            path='./NovelTagSys.realm'
            schema={schemas}
            sync={syncConfigWithErrorHandling}
          &gt;
            &lt;Stack&gt;
              &lt;Stack.Screen name=&quot;(tabs)&quot; options={{ headerShown: false }} /&gt;
              &lt;Stack.Screen name=&quot;+not-found&quot; /&gt;
            &lt;/Stack&gt;
          &lt;/RealmProvider&gt;
        &lt;/UserProvider&gt;
      &lt;/AppProvider&gt;
    &lt;/PaperProvider&gt;

</code></pre>
<p>é”™è¯¯ï¼š<code>Client attempted a write that is not allowed; it has been reverted</code><br>
fulllog:</p>
<pre><code class="language-javascript"> LOG  {&quot;weakInternal&quot;: {Symbol(Realm.WeakSyncSession.external_pointer): {}}}
 LOG  [SyncError: Client attempted a write that is not allowed; it has been reverted]

</code></pre>
<ol start="3">
<li>
<p>é‡æ–°å¯åŠ¨è¿œç«¯çš„ sync<br>
æ ¹æ®æ–‡æ¡£è¯´æ˜ï¼Œä¿®æ”¹äº†schemaä¹‹åï¼Œéœ€è¦ <code>Terminate Sync</code> ä¹‹åï¼Œ å†å¼€å§‹å¯åŠ¨<br>
<img src="https://DennyWanye.GitHub.io/post-images/1722590188452.png" alt="" loading="lazy"></p>
</li>
<li>
<p>ä¿®æ”¹æ–°å»ºçš„ schema æƒé™ï¼Œå¦åˆ™å‰ç«¯æ— æ³•å¯¹å…¶è¿›è¡Œè¯»å†™<br>
<img src="https://DennyWanye.GitHub.io/post-images/1722593173452.png" alt="" loading="lazy"></p>
</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åœ¨Expoé¡¹ç›®ä¸­ä½¿ç”¨ realm ]]></title>
        <id>https://DennyWanye.GitHub.io/post/zai-expo-xiang-mu-zhong-shi-yong-realm/</id>
        <link href="https://DennyWanye.GitHub.io/post/zai-expo-xiang-mu-zhong-shi-yong-realm/">
        </link>
        <updated>2024-07-09T03:13:16.000Z</updated>
        <content type="html"><![CDATA[<h3 id="ä¸€-å®‰è£…">ä¸€ã€å®‰è£…</h3>
<p>realmçš„å®˜æ–¹æœ‰ç»´æŠ¤ä¸€ä¸ªrealmæ”¯æŒçš„RNã€nodeã€Expoã€realmã€@realm/reactçš„å…¼å®¹æ€§å›¾è¡¨ï¼š<br>
https://github.com/realm/realm-js/blob/main/COMPATIBILITY.md</p>
<p><code>npx expo install realm @realm/react</code></p>
<p>Expo æœ¬èº«ä¸æ”¯æŒ realmï¼Œ æ‰€ä»¥éœ€è¦ç”¨å®‰å“ç¯å¢ƒæ¥è¿è¡Œï¼š</p>
<p><code>npm install expo-dev-client</code></p>
<p><code>npx expo run:android</code></p>
<h3 id="äºŒ-åœ¨é¡¹ç›®æœ¬åœ°è¿è¡Œrealm">äºŒã€ åœ¨é¡¹ç›®æœ¬åœ°è¿è¡ŒRealm</h3>
<ol>
<li>é…ç½® ReamlProvider</li>
</ol>
<pre><code class="language-javascript">...more code...
import { RealmProvider } from '@realm/react';
import { Ideas } from '@/models/Ideas';
import { Tags } from '@/models/Tags';
import { Collections } from '@/models/Collections';

...more code...

&lt;PaperProvider&gt;

      //path: ä¸ºå¯è®¾ç½®çš„å®‰è£…realmçš„ç›¸å¯¹è·¯å¾„
      //schemaä¸ºéœ€è¦æå‰åˆ›å»ºçš„document æ ·å¼
      //isMemory ä¸ºæ˜¯å¦åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œæ˜¯çš„è¯ï¼Œæ•°æ®åªä¼šå‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œåä¹‹ï¼Œä¼šæ”¾åˆ°æœ¬åœ°
      &lt;RealmProvider path='./NovelTagSys.realm' schema={[Ideas, Tags, Collections]} inMemory={false}&gt;
        &lt;ThemeProvider value={colorScheme === 'dark' ? DarkTheme : DefaultTheme}&gt;
          &lt;Stack&gt;
            &lt;Stack.Screen name=&quot;(tabs)&quot; options={{ headerShown: false }} /&gt;
            &lt;Stack.Screen name=&quot;+not-found&quot; /&gt;
          &lt;/Stack&gt;
        &lt;/ThemeProvider&gt;
      &lt;/RealmProvider&gt;
    &lt;/PaperProvider&gt;

</code></pre>
<ol start="2">
<li>åˆ›å»ºmodels</li>
</ol>
<p>åˆ›å»ºåµŒå¥—çš„ schemaçš„æ–¹å¼ï¼š https://www.mongodb.com/docs/atlas/device-sdks/sdk/react-native/model-data/relationships-and-embedded-objects/</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚ä½•å°†åˆ›å»ºçš„å¯¹è±¡å’Œåœ¨ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨çš„ interface ç±»å‹ä¸€è‡´ã€‚</p>
<pre><code class="language-javascript">import { BSON, ObjectSchema, Object, List } from &quot;realm&quot;;
import { TagsTS } from &quot;@/constants/Interface&quot;;
import { Tags } from &quot;./Tags&quot;;

export class Collections extends Object&lt;Collections&gt; {
    _id!: BSON.ObjectId;
    name!: string;
    desc: string = '';
    tags!: List&lt;Tags&gt; | TagsTS;

    //static primaryKey = '_id';

    static schema: ObjectSchema = {
        name: 'Collections',
        properties: {
          _id: 'objectId',
          name: 'string',
          desc: 'string',
          tags: 'Tags[]',
        },
        primaryKey: '_id',
      };
}


</code></pre>
<ol start="3">
<li>CUDPæ“ä½œ</li>
</ol>
<pre><code>
import { useRealm, useQuery } from '@realm/react';
import { Tags } from '@/models/Tags';

    const realm = useRealm()

    const tags = useQuery(Tags);

    const toUpdate = realm
      .objects(Tags)
      .filtered('name == $0', tag.name);

    //create
    realm.write(() =&gt; {
        realm.create(&quot;Tags&quot;, {
          _id: new BSON.ObjectId(),
          name: tag.name,
          type: tag.type,
          desc: tag.desc,
          color: tag.color,
        })
      })

    //update
    realm.write(() =&gt; {
        toUpdate[0].name = tag.name;
        toUpdate[0].type = tag.type;
        toUpdate[0].desc = tag.desc;
      });

    //delete
    const toDelete = realm
      .objects(Tags)
      .filtered('name == $0', deleteTagName);

    realm.write(() =&gt; {
      realm.delete(toDelete)
    })

</code></pre>
<h3 id="qa">QA</h3>
<h4 id="é—®é¢˜ä¸€-åœ¨-one-to-many-çš„-schema-ä¸­è¿›è¡Œå¯¹åµŒå¥—çš„-å­schemaä¼ é€’å€¼çš„æ—¶å€™å‘ç°å¦‚æœä¼ é€’çš„æ˜¯ç›¸åŒçš„æ•°ç»„ä¼šå¯¼è‡´å…¶æ¸…ç©ºæ•°æ®åº“ä¸­-å­schemaå¯¹åº”çš„å€¼">é—®é¢˜ä¸€ã€åœ¨ One-to-Many çš„ schema ä¸­è¿›è¡Œå¯¹åµŒå¥—çš„ å­schemaï¼Œä¼ é€’å€¼çš„æ—¶å€™ï¼Œå‘ç°å¦‚æœä¼ é€’çš„æ˜¯ç›¸åŒçš„æ•°ç»„ï¼Œä¼šå¯¼è‡´å…¶æ¸…ç©ºæ•°æ®åº“ä¸­ å­schemaï¼Œå¯¹åº”çš„å€¼ã€‚</h4>
<p>å¦‚ä¸‹ Errorï¼Œæˆ‘æƒ³è¦å°† <code>collectionTags</code> çš„å€¼æ›´æ–°åˆ° <code>toUpdate[0].tags</code> ä¸­ï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬ç›¸åŒçš„è¯ï¼Œåè€Œä¼šæ¸…é™¤realmä¸­  <code>toUpdate[0].tags</code>  çš„å€¼ã€‚</p>
<p>åº”è¯¥æ˜¯åœ¨å°†æ•°æ®åº“ä¸­è·å–çš„ å­schema å¯¹åº”çš„å€¼ï¼Œéœ€è¦è¿›è¡Œè§£æ„èµ‹å€¼æ“ä½œï¼Œæ‰èƒ½ä¼ ç»™ <code>realm.write</code> è¿›è¡Œæ›´æ–°ã€‚</p>
<pre><code class="language-javascirpt">
      realm.write(() =&gt; {
        toUpdate[0].name = collectionNmae;
        toUpdate[0].desc = collectionDesc;
        toUpdate[0].tags = [...collectionTags];  //éœ€è¦è¿™æ ·æ“ä½œä¸€ä¸‹
      });

//ä»¥ä¸‹æ“ä½œä¹Ÿä¼šæ¸…é™¤ toUpdate[0].tagså¯¹åº”æ•°æ®åº“ä¸­çš„å€¼

      realm.write(() =&gt; {
        toUpdate[0].name = collectionNmae;
        toUpdate[0].desc = collectionDesc;
        // toUpdate[0].tags = [...collectionTags];
        toUpdate[0].tags = toUpdate[0].tags;
      });

</code></pre>
<h5 id="error">Errorï¼š</h5>
<pre><code> LOG  toUpdate
 LOG  [{&quot;_id&quot;: [ObjectId], &quot;desc&quot;: &quot;this is a really big pig(changedasni ga )&quot;, &quot;name&quot;: &quot;pig king&quot;, &quot;tags&quot;: [Array]}]
 LOG  toUpdate[0].tags
 LOG  [{&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(87,50%,70%,1)&quot;, &quot;desc&quot;: &quot;çŒªçš®å¤Ÿåšï¼Œèƒ½æŒ¨æ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æ‰›æ&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(4,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½ç¡ï¼Œåƒå®Œå°±ç¡&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;å—œç¡&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(106,50%,70%,1)&quot;, &quot;desc&quot;: &quot;èƒ½è¿›åŒ–æˆå¤©è“¬å°çŒª&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;èƒ½è¿›åŒ–&quot;, &quot;type&quot;: &quot;å¯èƒ½æ€§&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(147,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æš´é£ŸII&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(304,50%,70%,1)&quot;, &quot;desc&quot;: &quot;è¿™åªæ˜¯ä¸€ä¸ªç§°å·&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;çŒªçŒª1å·&quot;, &quot;type&quot;: &quot;ç§°å·&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(127,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æš´é£ŸIII&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}]
 LOG  collectionTags
 LOG  [{&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(87,50%,70%,1)&quot;, &quot;desc&quot;: &quot;çŒªçš®å¤Ÿåšï¼Œèƒ½æŒ¨æ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æ‰›æ&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(4,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½ç¡ï¼Œåƒå®Œå°±ç¡&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;å—œç¡&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(106,50%,70%,1)&quot;, &quot;desc&quot;: &quot;èƒ½è¿›åŒ–æˆå¤©è“¬å°çŒª&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;èƒ½è¿›åŒ–&quot;, &quot;type&quot;: &quot;å¯èƒ½æ€§&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(147,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æš´é£ŸII&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(304,50%,70%,1)&quot;, &quot;desc&quot;: &quot;è¿™åªæ˜¯ä¸€ä¸ªç§°å·&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;çŒªçŒª1å·&quot;, &quot;type&quot;: &quot;ç§°å·&quot;}, {&quot;_id&quot;: [ObjectId], &quot;color&quot;: &quot;hsla(127,50%,70%,1)&quot;, &quot;desc&quot;: &quot;ç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒç‰¹åˆ«èƒ½åƒ&quot;, &quot;manufacturer&quot;: [Array], &quot;name&quot;: &quot;æš´é£ŸIII&quot;, &quot;type&quot;: &quot;ç‰¹é•¿&quot;}]

</code></pre>
<h3 id="é—®é¢˜äºŒ-æ€ä¹ˆæ‰¾åˆ°realmçš„æ–‡ä»¶">é—®é¢˜äºŒ æ€ä¹ˆæ‰¾åˆ°realmçš„æ–‡ä»¶</h3>
<p>Andriod:<br>
é¦–å…ˆç”¨ Andriod Stadio æ¥æ‰“å¼€ï¼Œå¹¶å¯åŠ¨æ–‡ä»¶:</p>
<ol>
<li><code>expo prebuild</code> ç”Ÿæˆ andriod å’Œ ios æ–‡ä»¶å¤¹</li>
<li>å®‰è£… gradle : <code>brew install gradle</code>ã€‚ æ³¨æ„ï¼š å¦‚æœä½ åœ¨æ–‡ä»¶å¤¹ Andriod ä¸‹æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå®ƒä¼šé¡ºæ‰‹å¸®ä½ å°†è¯¥æ–‡ä»¶å¤¹ä¸‹é¢çš„ä¾èµ–å®‰è£…å¥½ï¼Œä¼šèŠ±ä¸€å®šçš„æ—¶é—´ã€‚</li>
<li>ç”¨Andriod Stadioæ‰“å¼€ andriod æ–‡ä»¶å¤¹ã€‚</li>
<li>åœ¨ Andriod Stadio &gt; viwe &gt; Tool Windows &gt; Deveice Explorer ä¸­ï¼Œæ‰¾åˆ° <code>realm.path</code> å¯¹åº”çš„ .ream æ–‡ä»¶ï¼ŒåŒå‡»/å³é”®é¼ æ ‡å¯¹åº”æ–‡ä»¶ &gt; save as ... ä¿å­˜å¥½æ–‡ä»¶</li>
<li>ç”¨ Realm Stadio æ‰“å¼€å¯¹åº”æ–‡ä»¶</li>
</ol>
<p>IOSï¼š ç›´æ¥ç”¨ RealmStadioæ‰“å¼€  <code>realm.path</code> å¯¹åº”çš„ .ream æ–‡ä»¶å°±è¡Œäº†ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[React å°è£…å¼¹çª—ç»„å»º]]></title>
        <id>https://DennyWanye.GitHub.io/post/react-feng-zhuang-dan-chuang-zu-jian/</id>
        <link href="https://DennyWanye.GitHub.io/post/react-feng-zhuang-dan-chuang-zu-jian/">
        </link>
        <updated>2024-07-08T02:07:08.000Z</updated>
        <content type="html"><![CDATA[<p>å°è£…ä¸€ä¸ªå¼¹çª—è¾“å…¥ï¼Œè¾“å‡ºç»„ä»¶ï¼š</p>
<p>éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ol>
<li><code>â€œReact.createElementâ€æœ€å¤šå¯æä¾›â€œ2â€ä¸ª</code>ï¼Œä¿®æ”¹ç»„ä»¶æ¥å—å¯¹è±¡ <code>props</code> ä¸ºå…¥å‚ã€‚</li>
<li>å› ä¸ºæ— æ³•åˆ©ç”¨æ•°ç»„æ¥è°ƒåŠ¨ <code>useState</code>ï¼Œæ‰€ä»¥è¡¨æ ¼çš„åŒå‘ç»‘å®šçš„æ•°æ®å’Œä¿®æ”¹æ–¹æ³•æ˜¯ä»çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ã€‚</li>
</ol>
<p>å¦‚ä¸‹æ˜¯ä»£ç ï¼š</p>
<pre><code class="language-javascript">
import { Portal, TextInput, Text, Modal } from 'react-native-paper';
import { StyleSheet, SafeAreaView } from 'react-native';
import { ReactNode } from 'react';

type formItems = {
    label: string,
    value: string,
    setValue: Function,
}

interface PropsTagEditor {
    title: string,
    visible: boolean,
    formItems: Array&lt;formItems&gt;,
    submitFun: Function
}

export default function UseEditTag(Props: PropsTagEditor): ReactNode {

    const { title, visible, formItems, submitFun } = Props

    const containerStyle = { backgroundColor: 'white', padding: 20 };

    return (&lt;Portal&gt;
        &lt;Modal visible={visible} onDismiss={() =&gt; submitFun()} contentContainerStyle={containerStyle}&gt;
            &lt;SafeAreaView&gt;
                &lt;Text&gt;{title}&lt;/Text&gt;
                {
                    formItems.map((item, index) =&gt; {
                        return (
                            &lt;TextInput
                                key={index}
                                label={item.label}
                                value={item.value}
                                onChangeText={text =&gt; item.setValue(text)}
                                mode=&quot;outlined&quot;
                                style={styles.tagInput}
                            /&gt;
                        )
                    })
                }
            &lt;/SafeAreaView&gt;
        &lt;/Modal&gt;
    &lt;/Portal&gt;)
}

const styles = StyleSheet.create({
    tagInput: {
        marginTop: 10,
    },
});


</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[react native å’Œ Expo æ¡†æ¶çš„ä½¿ç”¨é‡åˆ°çš„é—®é¢˜]]></title>
        <id>https://DennyWanye.GitHub.io/post/react-native-he-expo-kuang-jia-de-shi-yong-yu-dao-de-wen-ti/</id>
        <link href="https://DennyWanye.GitHub.io/post/react-native-he-expo-kuang-jia-de-shi-yong-yu-dao-de-wen-ti/">
        </link>
        <updated>2024-07-01T03:41:25.000Z</updated>
        <content type="html"><![CDATA[<h3 id="é—®é¢˜ä¸€commanderror-required-property-androidpackage-is-not-found-in-the-project-appjson-this-is-required-to-open-the-app">é—®é¢˜ä¸€ï¼š<code>CommandError: Required property 'android.package' is not found in the project app.json. This is required to open the app.</code></h3>
<p>åŸå› åœ¨ <code>package.json</code> ä¸­ç¼ºå°‘ <code>android.package</code> å­—æ®µï¼Œå¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å±æ€§ï¼š</p>
<pre><code class="language-javascript">
  &quot;android&quot;: {
    &quot;package&quot;: &quot;com.yourcompany.yourappname&quot;,
    &quot;versionCode&quot;: 1
  }

</code></pre>
<h3 id="é—®é¢˜äºŒå…³äº-expo-image-picker-çš„ä½¿ç”¨æ–¹æ³•">é—®é¢˜äºŒï¼šå…³äº <code>expo-image-picker</code> çš„ä½¿ç”¨æ–¹æ³•ï¼š</h3>
<pre><code class="language-javascript">import * as ImagePicker from 'expo-image-picker';

//åˆ©ç”¨ launchImageLibraryAsync æ–¹æ³•æ¥è¿”å›ä¸€ä¸ª uri èµ„æºï¼Œè®© &lt;Image&gt;æ¥è¿›è¡Œæ˜¾ç¤ºã€‚
//å…¶launchImageLibraryAsync() æ¥æ”¶ä¸€ä¸ªæŒ‡å®šäº†ä¸åŒé€‰é¡¹çš„å¯¹è±¡ã€‚è¯¥å¯¹è±¡æ˜¯ ImagePickerOptions 
//objectã€‚æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’å¯¹è±¡æ¥æŒ‡å®šä¸åŒçš„é€‰é¡¹ã€‚

//å½“ allowsEditing è®¾ç½®ä¸º true æ—¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨ Android å’Œ iOS ä¸Šçš„é€‰æ‹©è¿‡ç¨‹ä¸­è£å‰ªå›¾ç‰‡ï¼Œä½†ä¸èƒ½
//åœ¨ Web ä¸Šè£å‰ªå›¾ç‰‡ã€‚
const pickImageAsync = async () =&gt; {
    let result = await ImagePicker.launchImageLibraryAsync({
      allowsEditing: true,
      quality: 1,
    })

    console.log(result)

    if(!result.canceled) {
      setSelectImage(result.assets[0].uri)
      console.log(result);
    } else {
      alert('You did not select any image.');
    }
  }

//&lt;Image&gt; ä¸­çš„ source å¯ä»¥æ˜¯ å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯urlï¼Œä¹Ÿå¯ä»¥æ˜¯ uri 
  &lt;Image source={imageSource} &gt;&lt;/Image&gt;

//ä¸ºäº†æ¼”ç¤º result å¯¹è±¡åŒ…å«å“ªäº›å±æ€§ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç»“æœå¯¹è±¡ç¤ºä¾‹ï¼š
{
  &quot;assets&quot;: [
    {
      &quot;assetId&quot;: null,
      &quot;base64&quot;: null,
      &quot;duration&quot;: null,
      &quot;exif&quot;: null,
      &quot;height&quot;: 4800,
      &quot;rotation&quot;: null,
      &quot;type&quot;: &quot;image&quot;,
      &quot;uri&quot;: &quot;file:///data/user/0/host.exp.exponent/cache/ExperienceData/%username%252Fsticker-smash-47-beta/ImagePicker/77c4e56f-4ccc-4c83-8634-fc376597b6fb.jpeg&quot;,
      &quot;width&quot;: 3200
    }
  ],
  &quot;canceled&quot;: false
}

</code></pre>
<h3 id="é—®é¢˜ä¸‰æ„å»ºé¡¹ç›®çš„é—®é¢˜">é—®é¢˜ä¸‰ï¼šæ„å»ºé¡¹ç›®çš„é—®é¢˜</h3>
<p>ç°åœ¨å¯¹äºexpoé¡¹ç›®æ„å»ºçš„ç†è§£ï¼š</p>
<ol>
<li>æœ¬åœ°å°†ä»£ç  ä¸Šä¼ åˆ° äº‘ç«¯ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„é…ç½®</li>
<li>äº‘ç«¯åˆ©ç”¨metroæ¥æ ¹æ®é…ç½®ï¼Œæ¥è¿›è¡Œæ„å»ºå¯¹åº”çš„ç‰ˆæœ¬</li>
<li>äº‘ç«¯è¿”å›å¯¹åº”ç‰ˆæœ¬åº”ç”¨çš„ä¸‹è½½é“¾æ¥</li>
</ol>
<h4 id="æ„å»ºdevelopment-åº”ç”¨">æ„å»ºdevelopment åº”ç”¨</h4>
<pre><code>
eas --version

//ç¡®ä¿ä½ å·²ç»ç™»å½•äº†
eas whoami

//ç”Ÿæˆeasé…ç½®,å¯ä»¥ç”Ÿæˆå¯¹åº”Androidå’Œioså¹³å°å¯¹åº”çš„é…ç½®æ–‡ä»¶ eas.jsonï¼Œæ­¤æ–‡ä»¶ç”Ÿæˆåœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚

eas init 

eas build:configure

//ç”Ÿæˆå¯ä»¥é“¾æ¥åˆ°æœ¬åœ°æµ‹è¯•æœåŠ¡å™¨çš„ expoå®‰è£…åŒ…
//éœ€è¦åœ¨é¡¹ç›®ç›®å½•å®‰è£… expo-dev-client  åŒæ—¶ï¼Œä½ éœ€è¦expoçš„è´¦æˆ·ç”¨ä½œè¿œç¨‹ç™»å½•
//å¹¶ä¸” ä¹Ÿéœ€è¦åœ¨å…¨å±€å®‰è£…eas-cli

npm install expo-dev-client 
npm install -g eas-cli

eas build --profile=development --platform=android

//ç”Ÿæˆå¯ä»¥ç›´æ¥å¯ä»¥å®‰è£…æ‰“å¼€çš„å®‰è£…åŒ…ï¼Œæ²¡æœ‰æµ‹è¯•ç¯å¢ƒ
eas build --profile=preview --platform=android


</code></pre>
<p>åœ¨æœ¬åœ°æ‰“åŒ…ï¼š</p>
<p>å¦‚æœä½ çš„ç”µè„‘å·²ç»é…ç½®å¥½äº†javaã€NDKç¯å¢ƒï¼Œåªéœ€æ‰§è¡Œ</p>
<pre><code>eas build --platform android --profile release --local
</code></pre>
<p>æŠ¥äº†releaseç›¸å…³çš„é”™è¯¯ï¼Œè¯·æ£€æŸ¥eas.jsonæ–‡ä»¶ä¸­ --&gt; build --&gt; releaseçš„è®¾ç½®é—®é¢˜<br>
error ç¤ºä¾‹:</p>
<pre><code>â˜… eas-cli@10.1.0 is now available.
To upgrade, run npm install -g eas-cli.
Proceeding with outdated version.

Missing build profile in eas.json: release
Error: build command failed.
</code></pre>
<p>eas.jsonæ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code>
{
  &quot;cli&quot;: {
    &quot;version&quot;: &quot;&gt;= 10.0.3&quot;
  },
  &quot;build&quot;: {
    &quot;development&quot;: {
      &quot;developmentClient&quot;: true,
      &quot;distribution&quot;: &quot;internal&quot;
    },
    &quot;preview&quot;: {
      &quot;distribution&quot;: &quot;internal&quot;
    },
    &quot;production&quot;: {},
    &quot;release&quot;: {
      &quot;android&quot;: {
        &quot;buildType&quot;: &quot;apk&quot;
      }
    }
  },
  &quot;submit&quot;: {
    &quot;production&quot;: {}
  }
}

</code></pre>
<p>æœ‰ç”¨çš„æ–‡ç« é“¾æ¥ï¼šhttps://juejin.cn/post/7357292176945184795</p>
<h3 id="é—®é¢˜4-authentication-is-required">é—®é¢˜4:  <code>Authentication is required</code></h3>
<p>è¿è¡Œ <code>npx expo run:android</code> æŠ¥é”™</p>
<pre><code>Authentication is required
âœ– Failed to create the native project.
You may want to delete the `./ios` and/or `./android` directories before trying again.
</code></pre>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li>å…¨å±€å®‰è£… expoè„šæ‰‹æ¶ï¼š <code>npm install -g expo-cli</code></li>
<li>è¿è¡Œ <code>expo whoami</code> ç¡®è®¤æ˜¯å¦æ˜¯ç™»å½•çš„çŠ¶æ€</li>
<li>è¿è¡Œ ``expo prebuild`</li>
</ol>
<p>link: https://stackoverflow.com/questions/77760368/authentication-required-error-message-when-running-npx-expo-prebuild-in-term</p>
<h3 id="é—®é¢˜5-expo-apiv2error-entity-not-authorized">é—®é¢˜5: expo ApiV2Error: Entity Not Authorized.</h3>
<p>åŸå› ï¼šthe problem was that the owner property in app.json did not match the owner for whatever account you're logged into on expo-cli or your expo go app. So just try to check if owner property is correct.</p>
<p>è§£å†³ï¼š</p>
<pre><code class="language-javascript">npx expo start --offline
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ€ä¹ˆæ ·ä½¿ç”¨Tagæ ‡ç­¾]]></title>
        <id>https://DennyWanye.GitHub.io/post/how-to-use-tag-in-git/</id>
        <link href="https://DennyWanye.GitHub.io/post/how-to-use-tag-in-git/">
        </link>
        <updated>2024-06-29T09:17:18.000Z</updated>
        <content type="html"><![CDATA[<p>For work, need to use <code>tag</code> in git to mark a version, so that jenkins can deploy it.</p>
<p>åˆ›å»ºå¹¶æ¨é€ä¸€ä¸ªå¸¦å¤‡æ³¨çš„æ ‡ç­¾tagï¼š</p>
<pre><code>git tag -a TagName -m â€˜useful infoâ€™

git push origin TagName

</code></pre>
<p>åˆ›å»ºè½»é‡çº§æ ‡ç­¾ï¼ˆä¸å¸¦å¤‡æ³¨ï¼‰ï¼š</p>
<pre><code>
git tag TagName

</code></pre>
<p>æœç´¢tagï¼š</p>
<pre><code>
git tag -l â€˜æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼â€™

</code></pre>
<p>åˆ é™¤æœ¬åœ°tagï¼š</p>
<pre><code>git tag -d TagName

</code></pre>
<p>åˆ é™¤è¿œç¨‹çš„tagï¼š</p>
<pre><code>git push origin -d tag TagName

git push origin --delete tag TagName

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[javascriptä¸­ New çš„åº•å±‚å®ç°åŸç†]]></title>
        <id>https://DennyWanye.GitHub.io/post/javascript-zhong-new-de-di-ceng-shi-xian-yuan-li/</id>
        <link href="https://DennyWanye.GitHub.io/post/javascript-zhong-new-de-di-ceng-shi-xian-yuan-li/">
        </link>
        <updated>2022-06-02T10:30:06.000Z</updated>
        <content type="html"><![CDATA[<p>new çš„ä½œç”¨ï¼Œå°±æ˜¯çœé‚£ä¹ˆå‡ è¡Œä»£ç ã€‚ï¼ˆä¹Ÿå°±æ˜¯æ‰€è°“çš„ï¼‰ã€‚</p>
<p>ï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ªå¯¹è±¡<br>
ï¼ˆ2ï¼‰è®¾ç½®åŸå‹é“¾<br>
ï¼ˆ3ï¼‰è®©Fä¸­çš„thisæŒ‡å‘instanceï¼Œæ‰§è¡ŒFçš„å‡½æ•°ä½“ã€‚<br>
ï¼ˆ4ï¼‰åˆ¤æ–­Fçš„è¿”å›å€¼ç±»å‹ï¼š<br>
å¦‚æœæ˜¯å€¼ç±»å‹ï¼Œå°±ä¸¢å¼ƒå®ƒï¼Œè¿˜æ˜¯è¿”å›instanceã€‚<br>
å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œæ›¿æ¢æ‰instanceã€‚</p>
<pre><code class="language-js">
function create(Con, ...args){ 
 // åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ 
 this.obj = {}; 
 // å°†ç©ºå¯¹è±¡æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹é“¾
 Object.setPrototypeOf(this.obj, Con.prototype); 
 // objç»‘å®šåˆ°æ„é€ å‡½æ•°ä¸Šï¼Œä¾¿å¯ä»¥è®¿é—®æ„é€ å‡½æ•°ä¸­çš„å±æ€§ï¼Œå³this.obj.Con(args) 
 let result = Con.apply(this.obj, args);
 // å¦‚æœè¿”å›çš„resultæ˜¯ä¸€ä¸ªå¯¹è±¡åˆ™è¿”å› 
 // newæ–¹æ³•å¤±æ•ˆï¼Œå¦åˆ™è¿”å›
obj   return result instanceof Object ? result : this.obj;
 }

</code></pre>
<h3 id="1æ€»è§ˆ">1.æ€»è§ˆ</h3>
<figure data-type="image" tabindex="1"><img src="https://DennyWanye.GitHub.io/post-images/1654174286254.png" alt="" loading="lazy"></figure>
<p>å›¾çš„è¯´æ˜ï¼šå³ä¸‹è§’ä¸ºå›¾ä¾‹ï¼Œçº¢è‰²ç®­å¤´è¡¨ç¤º__proto__å±æ€§æŒ‡å‘ã€ç»¿è‰²ç®­å¤´è¡¨ç¤ºprototypeå±æ€§çš„æŒ‡å‘ã€æ£•è‰²å®çº¿ç®­å¤´è¡¨ç¤ºæœ¬èº«å…·æœ‰çš„constructorå±æ€§çš„æŒ‡å‘ï¼Œæ£•è‰²è™šçº¿ç®­å¤´è¡¨ç¤ºç»§æ‰¿è€Œæ¥çš„constructorå±æ€§çš„æŒ‡å‘ï¼›è“è‰²æ–¹å—è¡¨ç¤ºå¯¹è±¡ï¼Œæµ…ç»¿è‰²æ–¹å—è¡¨ç¤ºå‡½æ•°ï¼ˆè¿™é‡Œä¸ºäº†æ›´å¥½çœ‹æ¸…ï¼ŒFoo()ä»…ä»£è¡¨æ˜¯å‡½æ•°ï¼Œå¹¶ä¸æ˜¯æŒ‡æ‰§è¡Œå‡½æ•°Fooåå¾—åˆ°çš„ç»“æœï¼Œå›¾ä¸­çš„å…¶ä»–å‡½æ•°åŒç†ï¼‰ã€‚å›¾çš„ä¸­é—´éƒ¨åˆ†å³ä¸ºå®ƒä»¬ä¹‹é—´çš„è”ç³»ï¼Œå›¾çš„æœ€å·¦è¾¹å³ä¸ºä¾‹å­ä»£ç </p>
<h3 id="2__proto__å±æ€§">2.__proto__å±æ€§</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç‰¢è®°ä¸¤ç‚¹ï¼šâ‘ __proto__å’Œconstructorå±æ€§æ˜¯å¯¹è±¡æ‰€ç‹¬æœ‰çš„ï¼›â‘¡ prototypeå±æ€§æ˜¯å‡½æ•°æ‰€ç‹¬æœ‰çš„ã€‚ä½†æ˜¯ç”±äºJSä¸­å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæ‹¥æœ‰__proto__å’Œconstructorå±æ€§ï¼Œè¿™ç‚¹æ˜¯è‡´ä½¿æˆ‘ä»¬äº§ç”Ÿå›°æƒ‘çš„å¾ˆå¤§åŸå› ä¹‹ä¸€ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://DennyWanye.GitHub.io/post-images/1654174483109.png" alt="" loading="lazy"></figure>
<p>ç¬¬ä¸€ï¼Œè¿™é‡Œæˆ‘ä»¬ä»…ç•™ä¸‹ <strong>proto</strong> å±æ€§ï¼Œå®ƒæ˜¯å¯¹è±¡æ‰€ç‹¬æœ‰çš„ï¼Œå¯ä»¥çœ‹åˆ°__proto__å±æ€§éƒ½æ˜¯ç”±ä¸€ä¸ªå¯¹è±¡æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå³æŒ‡å‘å®ƒä»¬çš„åŸå‹å¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºçˆ¶å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå»å®ƒçš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºçˆ¶å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œå¦‚æœçˆ¶å¯¹è±¡ä¹Ÿä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œåˆ™ç»§ç»­å¾€çˆ¶å¯¹è±¡çš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºçˆ·çˆ·å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œåˆ™ç»§ç»­å¾€ä¸Šæ‰¾â€¦ç›´åˆ°åŸå‹é“¾é¡¶ç«¯nullï¼ˆå¯ä»¥ç†è§£ä¸ºåŸå§‹äººã€‚ã€‚ã€‚ï¼‰ï¼Œå†å¾€ä¸Šæ‰¾å°±ç›¸å½“äºåœ¨nullä¸Šå–å€¼ï¼Œä¼šæŠ¥é”™ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼Œå†å¾€ä¸Šå°±å·²ç»ä¸æ˜¯â€œäººâ€çš„èŒƒç•´äº†ï¼Œæ‰¾ä¸åˆ°äº†ï¼Œåˆ°æ­¤ç»“æŸï¼Œ<strong>nullä¸ºåŸå‹é“¾çš„ç»ˆç‚¹</strong>ï¼‰ï¼Œç”±ä»¥ä¸Šè¿™ç§é€šè¿‡__proto__å±æ€§æ¥è¿æ¥å¯¹è±¡ç›´åˆ°nullçš„ä¸€æ¡é“¾å³ä¸ºæˆ‘ä»¬æ‰€è°“çš„åŸå‹é“¾ã€‚</p>
<p>å…¶å®æˆ‘ä»¬å¹³æ—¶è°ƒç”¨çš„å­—ç¬¦ä¸²æ–¹æ³•ã€æ•°ç»„æ–¹æ³•ã€å¯¹è±¡æ–¹æ³•ã€å‡½æ•°æ–¹æ³•ç­‰éƒ½æ˜¯é __proto__ç»§æ‰¿è€Œæ¥çš„ã€‚</p>
<h3 id="3-prototypeå±æ€§">3. prototypeå±æ€§</h3>
<figure data-type="image" tabindex="3"><img src="https://DennyWanye.GitHub.io/post-images/1654174512052.png" alt="" loading="lazy"></figure>
<p>prototypeå±æ€§ï¼Œåˆ«å¿˜äº†ä¸€ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°è¦ç‰¢è®°çš„ä¸¤ç‚¹ä¸­çš„ç¬¬äºŒç‚¹ï¼Œå®ƒæ˜¯å‡½æ•°æ‰€ç‹¬æœ‰çš„ï¼Œå®ƒæ˜¯ä»ä¸€ä¸ªå‡½æ•°æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒçš„å«ä¹‰æ˜¯å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ï¼ˆå…¶å®æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼‰æ‰€åˆ›å»ºçš„å®ä¾‹çš„åŸå‹å¯¹è±¡ï¼Œç”±æ­¤å¯çŸ¥ï¼šf1.<strong>proto</strong> === Foo.prototypeï¼Œå®ƒä»¬ä¸¤ä¸ªå®Œå…¨ä¸€æ ·ã€‚é‚£prototypeå±æ€§çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è®©è¯¥å‡½æ•°æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ä»¬éƒ½å¯ä»¥æ‰¾åˆ°å…¬ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚ä»»ä½•å‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œå…¶å®ä¼šé»˜è®¤åŒæ—¶åˆ›å»ºè¯¥å‡½æ•°çš„prototypeå¯¹è±¡ã€‚</p>
<h3 id="4-constructorå±æ€§">4. constructorå±æ€§</h3>
<figure data-type="image" tabindex="4"><img src="https://DennyWanye.GitHub.io/post-images/1654174672060.png" alt="" loading="lazy"></figure>
<p>constructorå±æ€§ä¹Ÿæ˜¯å¯¹è±¡æ‰æ‹¥æœ‰çš„ï¼Œå®ƒæ˜¯ä»ä¸€ä¸ªå¯¹è±¡æŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå«ä¹‰å°±æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ„é€ å‡½æ•°ï¼ˆæœ¬èº«æ‹¥æœ‰æˆ–ç»§æ‰¿è€Œæ¥ï¼Œç»§æ‰¿è€Œæ¥çš„è¦ç»“åˆ__proto__å±æ€§æŸ¥çœ‹ä¼šæ›´æ¸…æ¥šç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºFunctionè¿™ä¸ªå¯¹è±¡æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„æ„é€ å‡½æ•°å°±æ˜¯å®ƒè‡ªå·±ï¼ˆå› ä¸ºFunctionå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œæ‰€æœ‰å‡½æ•°å’Œå¯¹è±¡æœ€ç»ˆéƒ½æ˜¯ç”±Functionæ„é€ å‡½æ•°å¾—æ¥ï¼Œæ‰€ä»¥constructorå±æ€§çš„ç»ˆç‚¹å°±æ˜¯Functionè¿™ä¸ªå‡½æ•°ã€‚</p>
<figure data-type="image" tabindex="5"><img src="https://DennyWanye.GitHub.io/post-images/1654175083956.png" alt="" loading="lazy"></figure>
<p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸Šæ®µä¸­â€œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ„é€ å‡½æ•°â€è¿™å¥è¯ã€‚è¿™é‡Œçš„æ„æ€æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥æ‰¾åˆ°å…¶å¯¹åº”çš„constructorï¼Œå› ä¸ºåˆ›å»ºå¯¹è±¡çš„å‰ææ˜¯éœ€è¦æœ‰constructorï¼Œè€Œè¿™ä¸ªconstructorå¯èƒ½æ˜¯å¯¹è±¡è‡ªå·±æœ¬èº«æ˜¾å¼å®šä¹‰çš„æˆ–è€…é€šè¿‡__proto__åœ¨åŸå‹é“¾ä¸­æ‰¾åˆ°çš„ã€‚è€Œå•ä»constructorè¿™ä¸ªå±æ€§æ¥è®²ï¼Œåªæœ‰prototypeå¯¹è±¡æ‰æœ‰ã€‚æ¯ä¸ªå‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™ï¼ŒJSä¼šåŒæ—¶åˆ›å»ºä¸€ä¸ªè¯¥å‡½æ•°å¯¹åº”çš„prototypeå¯¹è±¡ï¼Œè€Œ<code>å‡½æ•°åˆ›å»ºçš„å¯¹è±¡.__proto__ === è¯¥å‡½æ•°.prototype</code>ï¼Œ<code>è¯¥å‡½æ•°.prototype.constructor===è¯¥å‡½æ•°æœ¬èº«</code>ï¼Œæ•…é€šè¿‡å‡½æ•°åˆ›å»ºçš„å¯¹è±¡å³ä½¿è‡ªå·±æ²¡æœ‰constructorå±æ€§ï¼Œå®ƒä¹Ÿèƒ½é€šè¿‡__proto__æ‰¾åˆ°å¯¹åº”çš„constructorï¼Œæ‰€ä»¥ä»»ä½•å¯¹è±¡æœ€ç»ˆéƒ½å¯ä»¥æ‰¾åˆ°å…¶æ„é€ å‡½æ•°ï¼ˆnullå¦‚æœå½“æˆå¯¹è±¡çš„è¯ï¼Œå°†nullé™¤å¤–ï¼‰ã€‚å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="6"><img src="https://DennyWanye.GitHub.io/post-images/1654175145825.png" alt="" loading="lazy"></figure>
<h3 id="5-æ€»ç»“">5. æ€»ç»“</h3>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<p>æˆ‘ä»¬éœ€è¦ç‰¢è®°ä¸¤ç‚¹ï¼šâ‘ __proto__å’Œconstructorå±æ€§æ˜¯å¯¹è±¡æ‰€ç‹¬æœ‰çš„ï¼›â‘¡ prototypeå±æ€§æ˜¯å‡½æ•°æ‰€ç‹¬æœ‰çš„ï¼Œå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæ‹¥æœ‰__proto__å’Œconstructorå±æ€§ã€‚<br>
__proto__å±æ€§çš„ä½œç”¨å°±æ˜¯å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå»å®ƒçš„__proto__å±æ€§æ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼ˆçˆ¶å¯¹è±¡ï¼‰é‡Œæ‰¾ï¼Œä¸€ç›´æ‰¾ï¼Œç›´åˆ°__proto__å±æ€§çš„ç»ˆç‚¹nullï¼Œå†å¾€ä¸Šæ‰¾å°±ç›¸å½“äºåœ¨nullä¸Šå–å€¼ï¼Œä¼šæŠ¥é”™ã€‚é€šè¿‡__proto__å±æ€§å°†å¯¹è±¡è¿æ¥èµ·æ¥çš„è¿™æ¡é“¾è·¯å³æˆ‘ä»¬æ‰€è°“çš„åŸå‹é“¾ã€‚<br>
prototypeå±æ€§çš„ä½œç”¨å°±æ˜¯è®©è¯¥å‡½æ•°æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ä»¬éƒ½å¯ä»¥æ‰¾åˆ°å…¬ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œå³f1.<strong>proto</strong> === Foo.prototypeã€‚<br>
constructorå±æ€§çš„å«ä¹‰å°±æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰å‡½æ•°ï¼ˆæ­¤æ—¶çœ‹æˆå¯¹è±¡äº†ï¼‰æœ€ç»ˆçš„æ„é€ å‡½æ•°éƒ½æŒ‡å‘Functionã€‚<br>
â€ƒâ€ƒæœ¬æ–‡å°±æ­¤ç»“æŸäº†ï¼Œå¸Œæœ›å¯¹é‚£äº›å¯¹JSä¸­çš„prototypeã€__proto__ä¸constructorå±æ€§æœ‰å›°æƒ‘çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ã€‚</p>
<pre><code class="language-js">function inherit( Child, Parent ) {
    // ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§ 
    Child.prototype = Object.create(Parent.prototype)
    // ä¿®å¤ constructor
    Child.prototype.constructor = Child
    // å­˜å‚¨è¶…ç±»
    Child.super = Parent
    // é™æ€å±æ€§ç»§æ‰¿
    if (Object.setPrototypeOf){
        // setPrototypeOf es6
        Object.setPrototypeOf(Child, Parent)
    } else if (Child.__proto__) {
        // __proto__ es6 å¼•å…¥ï¼Œä½†æ˜¯éƒ¨åˆ†æµè§ˆå™¨æ—©å·²æ”¯æŒ
        Child.__proto__ = Parent
    } else {
        // å…¼å®¹ IE10 ç­‰é™ˆæ—§æµè§ˆå™¨
        // å°† Parent ä¸Šçš„é™æ€å±æ€§å’Œæ–¹æ³•æ‹·è´ä¸€ä»½åˆ° Child ä¸Šï¼Œä¸ä¼šè¦†ç›– Child ä¸Šçš„æ–¹æ³•
        for (var k in parent) {
            if( Parent.hasOwnProperty(k) &amp;&amp; !(k in Child)) {
                Child[k] = Parent[k]
            }
        }
    }
}

</code></pre>
<p><a href="https://chen-cong.blog.csdn.net/article/details/81211729">å¾ˆå¥½çš„ä¸€ç¯‡è¯´æ˜æ–‡ç« </a><br>
<a href="http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html">Javascriptç»§æ‰¿æœºåˆ¶çš„è®¾è®¡æ€æƒ³</a></p>
]]></content>
    </entry>
</feed>